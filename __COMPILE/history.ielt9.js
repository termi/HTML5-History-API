/*Copyright 2011-2013, Dmitriy Pakhtinov ( spb.piksel@gmail.com ) and github.com/termi */
void function(){"use strict";var l=void 0,n=!0,q=null,x=!1;function K(a){if(!a.__history_shim__){var e=k();if(L)return M=e.a,L=0;var c=a.oldURL||M;a=M=a.newURL||e.a;var e=c.replace(/^.*?(#|$)/,""),b=a.replace(/^.*?(#|$)/,"");c!=a&&!N&&A(l);u=N=0;e!=b&&A(2,c,a)}}function W(){if(u&&!(u=0)&&X.d!==Y)clearInterval(Z),setTimeout(A,10)}function $(a){var e=a||b.event,c=e.target||e.srcElement;a="defaultPrevented"in e?e.defaultPrevented:e.returnValue===x;if(c&&("A"===c.nodeName&&!a)&&(a=k(c.getAttribute("href",2),n),a.b&&"#"!==a.b&&a.b===a.a.replace(k().a.split("#").shift(),
""))){history.location.hash=a.b;a=a.b.replace(/^#/,"");if((c=document.getElementById(a))&&c.id===a&&"A"===c.nodeName)c=c.getBoundingClientRect(),window.scrollTo(O.scrollLeft||0,c.top+(O.scrollTop||0)-(O.clientTop||0));e.preventDefault?e.preventDefault():e.returnValue=x}}function P(a){u===f.href&&(a.stopImmediatePropagation?a.stopImmediatePropagation():a.stopPropagation(),u=0);b.removeEventListener("popstate",P,x);P=q}function A(a,e,c){var t=new B(2==a?"hashchange":3==a?"pagechange":"popstate");e!=
l&&(t.oldUrl=e);c!=l&&(t.newUrl=c);t.__history_shim__=n;if(!m&&a==l&&b.onpopstate)b.onpopstate(t);if(b.dispatchEvent)b.dispatchEvent(t);else{var d;if(a=h[t.type])for(var f in a)a.hasOwnProperty(f)&&("function"==typeof(d=a[f])||d&&"object"==typeof d&&(d=d.handleEvent))&&d.call(b,t)}}function Q(a){return F?a?F.setItem("__history_shim__",ga(a)):ha(F.getItem("__history_shim__"))||{}:{}}function G(a,e,c){return H?(H(a,e),a):c?a:l}var b=this,d=b.JSON||{},ha=d.parse,ga=d.stringify,C=document,O=C.documentElement,
B=b.j,I=Function.prototype.bind||x,R=Function.prototype.call,aa=I.call(R,Object.prototype.hasOwnProperty),y=b.history||{},j=(d=b.history)&&(d=d.__proto__||(d=d.constructor)&&d.prototype)&&d&&d!=Object.prototype||b.history,f=b.location,m="pushState"in y,ia=m&&y.state===l,u=f.href,ba=y.pushState,ca=y.replaceState,F=b.sessionStorage,H;if(d=Object.defineProperty&&function(a,e){var c,b;for(b in e)aa(e,b)&&(c=e[b],"object"!=typeof c&&(c={value:c}),"configurable"in c||(c.configurable=n),Object.defineProperty(a,
b,c))}){try{d(j,{_:{get:function(){return 1},configurable:n}})}catch(la){d=q}1!==j._&&(d=q);"_"in j&&delete j._}!d&&j.__defineGetter__&&(d=function(a,e){var c,b;if(a.__defineGetter__)for(b in e)aa(e,b)&&(c=e[b],c.get&&a.__defineGetter__(b,c.get),c.set&&a.__defineSetter__(b,c.set));return a});H=d;var S=l,h,L=0,ja=/[^\/]+$/g,Y=location.pathname.split("#")[0].split("?")[0],k,g=C.createElement("a"),da,T,ea,U,J,D,r,ka=/^[^#]*/;k=function(a,b){if(a){if(!m||S){var c=k(),d=c.e,j=c.i,h=a.charAt(0);a=/^(?:[\w0-9]+\:)?\/\//.test(a)?
"/"==h?j+a:a:j+"//"+c.h+("/"==h?a:"?"==h?d+a:"#"==h?d+c.f+a:d.replace(ja,"")+a)}}else if(a=f.href,!m||b)a=f.protocol+"//"+f.host+(-1!=a.indexOf("#")?"/":Y)+(a.replace(ka,"")||"#").replace(/^#[\/]?(?:\/)?/,"");if(da!==a){g.href=da=a;D=g.port;J=g.host;r=g.pathname;if("http:"===g.protocol&&80==D||"https:"===g.protocol&&443==D)J=g.hostname,D="";r="/"==r.charAt(0)?r:"/"+r;T=r+g.search+g.hash;U=r+g.search;ea=U+g.hash}return{a:g.protocol+"//"+J+T,i:g.protocol,h:J,k:g.hostname||f.hostname,l:D||f.port,e:r,
f:g.search,b:g.hash,d:T,c:U,g:ea}};var j=!S&&j,z={state:{get:function(){return Q()[this.location.href]||q}},length:{get:function(){return y.length}},location:{set:function(a){b.location.href=a},get:function(){return m?f:V}}},V={assign:function(a){f.assign(m||0!==a.indexOf("#")?a:"#"+k().c+a)},reload:f.reload,replace:function(a){f.replace(m||0!==a.indexOf("#")?a:"#"+k().c+a)},toString:function(){return this.href}},d={href:{set:function(a){f.href=a},get:function(){return k().a}},protocol:{set:function(a){f.protocol=
a},get:function(){return f.protocol}},host:{set:function(a){f.host=a},get:function(){return f.host}},hostname:{set:function(a){f.hostname=a},get:function(){return f.hostname}},port:{set:function(a){f.port=a},get:function(){return f.port}},pathname:{set:function(a){f.pathname=a},get:function(){return k().e}},search:{set:function(a){f.search=a},get:function(){return k().f}},hash:{set:function(a){a=0===a.indexOf("#")?a:"#"+a;var b=k();f.hash="#"+b.c+a},get:function(){return k().b}},origin:{}},fa=b.onpopstate||
q,E=b.onhashchange,N=0,Z=q,X=k(),M=X.a;b.addEventListener?b.addEventListener("hashchange",K,x):b.attachEvent("onhashchange",K);E===l&&setInterval(function(){K({})},100);E||(E=q);b.addEventListener&&(b.addEventListener("popstate",P,x),b.addEventListener("popstate",function(){u=0;N=1},x));j&&G(j,y.state===l?{state:z.state,location:z.location}:{location:z.location});var z=G,p;a:{var v=V;if(Object.defineProperty){try{if(Object.defineProperty(v,"_",{get:function(){return 1},configurable:n}),1===v._){delete v._;
p=v;break a}}catch(ma){}p=document.createElement("a");for(var w in p)try{delete p[w],w in p&&p[w]&&(p[w]=q)}catch(na){}for(w in v)p[w]=v[w]}else p=v}V=z(p,d);!("onpopstate"in b||G(b,{onhashchange:{get:function(){return E},set:function(a){E=a||q}},onpopstate:{get:function(){return fa},set:function(a){(fa=a||q)&&!m&&W()}}},n))&&!m&&(Z=setInterval(function(){b.onpopstate&&W()},100));m||(document.addEventListener?document.addEventListener("click",$,x):document.attachEvent("onclick",$));try{new B("click")}catch(oa){B=
q}B||(B=function(a){var b;C.createEvent?(b=C.createEvent("Events"),b.initEvent(a,x,x)):(b=C.createEventObject(),b.type=a);return b});b.addEventListener||(h={popstate:{},hashchange:{}},h.onpopstate=h.popstate,h.onhashchange=h.hashchange,h.onpagechange=h.pagechange={},b.attachEvent=I.call(function(a,e,c){if(e in h){e=h[e];if(!(a=c.uuid))a=c.uuid="_"+ +new Date;e[a]||(e[a]=c)}else R.call(a,b,e,c)},b,b.attachEvent),b.detachEvent=I.call(function(a,e,c){var d;e in h?(a=c.uuid)&&(d=h[e])&&delete d[a]:R.call(a,
b,e,c)},b,b.detachEvent));j.pushState=function(a,b,c,d){var h=Q(),j=k().a,g=c&&k(c);u=0;c=g?g.a:j;d&&h[j]&&delete h[j];if((!m||ia)&&F&&a)h[c]=a,Q(h),a=q;ba&&ca?d?ca.call(this,a,b,c):ba.call(this,a,b,c):g&&g.d!=k().d&&(L=1,d?f.replace("#"+g.g):f.hash=g.g);a=k().c;if(!s||s!=a)A(3,s,a),s=a};j.replaceState=function(a,b,c){this.pushState(a,b,c,1)};j.emulate=!m;var s="",d=function(){var a=k().c;if(!s||s!=a)A(3,s,a),s=a};b.addEventListener?(b.addEventListener("popstate",d),b.addEventListener("hashchange",
d)):(b.attachEvent("popstate",d),b.attachEvent("hashchange",d));d=S=G=H=I=z=d=j=j=q}.call(window);
