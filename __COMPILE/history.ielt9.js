/*Copyright 2011-2013, Dmitriy Pakhtinov ( spb.piksel@gmail.com ) and github.com/termi */
void function(){var r=void 0,s=null,t=!1;function B(a,b,d){var g=new C(2==a?"hashchange":3==a?"pagechange":"popstate");b!=r&&(g.oldUrl=b);d!=r&&(g.newUrl=d);g.__history_shim__=!0;if(!n&&a==r&&c.onpopstate)c.onpopstate(g);if(c.dispatchEvent)c.dispatchEvent(g);else{var e;if(a=l[g.type])for(var p in a)a.hasOwnProperty(p)&&("function"==typeof(e=a[p])||e&&"object"==typeof e&&(e=e.handleEvent))&&e.call(c,g)}}function M(a){return E?a?E.setItem("__hitoryapi__",v(a)):F(E.getItem("__hitoryapi__"))||{}:{}}function G(a,b,d){var g=a,
e,p=t;try{if(1!==Object.defineProperty({},"t",{get:function(){return 1}}).t)throw Error;Object.defineProperties(a,b)}catch(h){if(a.__defineGetter__)for(var m in b)H(b,m)&&(a.__defineGetter__(m,b[m].get),b[m].set&&a.__defineSetter__(m,b[m].set));if(d)return t;p=!0}if(!d&&p&&z){d="StaticClass"+T+z++;g=["Class "+d];"execVB"in c||execScript("Function execVB(c) ExecuteGlobal(c) End Function","VBScript");"VBCVal"in c||execScript("Function VBCVal(o,r) If IsObject(o) Then Set r=o Else r=o End If End Function",
"VBScript");for(e in a)g.push("Public ["+e+"]");H(a,"toString")&&(a.propertyIsEnumerable("toString")||g.push("Public [toString]"),b["(toString)"]={get:function(){return this.toString.call(this)}});for(e in b)H(b,e)&&(b[e].get&&(a["get "+e]=b[e].get,g.push("Public [get "+e+"]","Public "+("(toString)"===e?"Default ":"")+"Property Get ["+e+"]","Call VBCVal(me.[get "+e+"].call(me),["+e+"])","End Property")),b[e].set&&(a["set "+e]=b[e].set,g.push("Public [set "+e+"]","Public Property Let ["+e+"](v)","Call me.[set "+
e+"].call(me,v)","End Property","Public Property Set ["+e+"](v)","Call me.[set "+e+"].call(me,v)","End Property")));g.push("End Class","Function "+d+"Factory()","Set "+d+"Factory=New "+d,"End Function");execVB(g.join("\n"));g=c[d+"Factory"]();for(e in a)g[e]=a[e];H(a,"toString")&&(g.toString=a.toString)}return g}var c=this,w=c.JSON||{},x=document,I=x.documentElement,C=c.j,N=Function.prototype.bind||function(a,b){var d=this,c=U.call(arguments,1);return function(){return d.apply(a,c.concat(U.call(arguments)))}},
U=Array.prototype.slice,O=Function.prototype.call,H=N.call(O,Object.prototype.hasOwnProperty),u=c.history||{},h=c.location,n="pushState"in u,Y=n&&u.state===r,A=h.href,P=u.pushState,V=u.replaceState,F=w.parse,v=w.stringify,E=c.sessionStorage,J=c.eval&&eval("/*@cc_on 1;@*/")&&+((/msie (\d+)/i.exec(navigator.userAgent)||[])[1]||0)||r,T=(new Date).getTime(),z=P||!J||8<J?0:1,f=8>J?x.createElement("iframe"):0,l,Q=0,Z=/[^\/]+$/g,W=location.pathname.split("#")[0].split("?")[0],k=function(a){var b,d,c,e,p,
D,m,f=/^[^#]*/;return function(j,$){if(j){if(!n||J){var K=k(),R=K.f,q=K.i,l=j.charAt(0);j=/^(?:[\w0-9]+\:)?\/\//.test(j)?"/"==l?q+j:j:q+"//"+K.h+("/"==l?j:"?"==l?R+j:"#"==l?R+K.g+j:R.replace(Z,"")+j)}}else if(j=h.href,!n||$)j=h.protocol+"//"+h.host+(-1!=j.indexOf("#")?"/":W)+(j.replace(f,"")||"#").replace(/^#[\/]?(?:\/)?/,"");if(b!==j){a.href=b=j;D=a.port;p=a.host;m=a.pathname;if("http:"===a.protocol&&80==D||"https:"===a.protocol&&443==D)p=a.hostname,D="";m="/"==m.charAt(0)?m:"/"+m;d=m+a.search+a.hash;
e=m+a.search;c=e+a.hash}return{a:a.protocol+"//"+p+d,i:a.protocol,h:p,k:a.hostname||h.hostname,l:D||h.port,f:m,g:a.search,b:a.hash,e:d,c:e,d:c}}}(x.createElement("a")),q=!z&&u||{back:u.back,forward:u.forward,go:u.go,pushState:r,replaceState:r,emulate:!n,toString:function(){return"[object History]"}},L={state:{get:function(){return f&&f.storage||M()[q.location.href]||s}},length:{get:function(){return u.length}},location:{set:function(a){c.location=a},get:function(){return n?h:S}}},S={assign:function(a){h.assign(n||
0!==a.indexOf("#")?a:"#"+k().c+a)},reload:h.reload,replace:function(a){h.replace(n||0!==a.indexOf("#")?a:"#"+k().c+a)},toString:function(){return this.href}},aa={href:{set:function(a){h.href=a},get:function(){return k().a}},protocol:{set:function(a){h.protocol=a},get:function(){return h.protocol}},host:{set:function(a){h.host=a},get:function(){return h.host}},hostname:{set:function(a){h.hostname=a},get:function(){return h.hostname}},port:{set:function(a){h.port=a},get:function(){return h.port}},pathname:{set:function(a){h.pathname=
a},get:function(){return k().f}},search:{set:function(a){h.search=a},get:function(){return k().g}},hash:{set:function(a){a=0===a.indexOf("#")?a:"#"+a;var b=k();f?a!=b.b&&(q.pushState(s,s,b.c+a),X({oldURL:b.a})):h.hash="#"+b.c+a},get:function(){return k().b}},origin:{}},X=function(){function a(a){if(!a.__history_shim__){var b=k();if(Q)return j=b.a,Q=0;var c=a.oldURL||j;a=j=a.newURL||b.a;var b=c.replace(/^.*?(#|$)/,""),d=a.replace(/^.*?(#|$)/,"");c!=a&&!f&&B(r);A=f=0;b!=d&&B(2,c,a)}}function b(){if(A&&
!(A=0)&&l.e!==W)clearInterval(m),setTimeout(B,10)}function d(a){A===h.href&&(a.stopImmediatePropagation?a.stopImmediatePropagation():a.stopPropagation(),A=0);c.removeEventListener("popstate",d,t)}function g(a){var b=a||c.event,d=b.target||b.srcElement;a="defaultPrevented"in b?b.defaultPrevented:b.returnValue===t;if(d&&("A"===d.nodeName&&!a)&&(a=k(d.getAttribute("href",2),!0),a.b&&"#"!==a.b&&a.b===a.a.replace(k().a.split("#").shift(),""))){history.location.hash=a.b;a=a.b.replace(/^#/,"");if((d=document.getElementById(a))&&
d.id===a&&"A"===d.nodeName)d=d.getBoundingClientRect(),window.scrollTo(I.scrollLeft||0,d.top+(I.scrollTop||0)-(I.clientTop||0));b.preventDefault?b.preventDefault():b.returnValue=t}}var e=c.onpopstate||s,p=c.onhashchange||s,f=0,m=s,l=k(),j=l.a;c.addEventListener?c.addEventListener("hashchange",a,t):c.attachEvent("onhashchange",a);c.addEventListener&&(c.addEventListener("popstate",d,t),c.addEventListener("popstate",function(){A=0;f=1},t));q=G(q,z?L:u.state===r?{state:L.state,location:L.location}:{location:L.location});
S=G(S,aa);z&&execScript("Public history, onhashchange","VBScript");!("onpopstate"in c||G(c,{onhashchange:{get:function(){return p},set:function(a){p=a||s}},onpopstate:{get:function(){return e},set:function(a){(e=a||s)&&!n&&b()}}},!0))&&!n&&(m=setInterval(function(){c.onpopstate&&b()},100));n||(document.addEventListener?document.addEventListener("click",g,t):document.attachEvent("onclick",g));return a}();v||(v=function(a,b,d){for(b in(d="[object Object]"==a&&[])&&a)d.push(v(b)+":"+v(a[b]));return""+
a===a?'"'+a+'"':a&&a.map?"["+a.map(v)+"]":d?"{"+d+"}":a});F||(F=function(a){return a?(new Function("return "+a))():s});try{new C("click")}catch(ba){C=s}C||(C=function(a){var b;x.createEvent?(b=x.createEvent("Events"),b.initEvent(a,t,t)):(b=x.createEventObject(),b.type=a);return b});c.addEventListener||(l={popstate:{},hashchange:{}},l.onpopstate=l.popstate,l.onhashchange=l.hashchange,l.onpagechange=l.pagechange={},c.attachEvent=N.call(function(a,b,d){if(b in l){b=l[b];if(!(a=d.uuid))a=d.uuid="_"+ +new Date;
b[a]||(b[a]=d)}else O.call(a,c,b,d)},c,c.attachEvent),c.detachEvent=N.call(function(a,b,d){var g;b in l?(a=d.uuid)&&(g=l[b])&&delete g[a]:O.call(a,c,b,d)},c,c.detachEvent));q.pushState=function(a,b,d,c){var e=M(),p=k().a,f=d&&k(d);A=0;d=f?f.a:p;c&&e[p]&&delete e[p];if((!n||Y)&&E&&a)e[d]=a,M(e),a=s;P&&V?c?V.call(q,a,b,d):P.call(q,a,b,d):f&&f.e!=k().e&&(Q=1,c?h.replace("#"+f.d):h.hash=f.d);a=k().c;if(!y||y!=a)B(3,y,a),y=a};q.replaceState=function(a,b,d){q.pushState(a,b,d,1)};z?(c.history=q,function(a,
b){var d,g;if(f&&(g=function(){var a=k().a;b!=a&&X({oldURL:b,newURL:b=a})},d=setInterval(g,100),f.src="javascript:true;",f=I.firstChild.appendChild(f).contentWindow,q.pushState=function(a,c,e,l,j){var n=f.document;if(e=e&&k(e)){j||clearInterval(d);if(l)f.lfirst?(history.back(),q.pushState(a,c,e.a,0,1)):(f.storage=a,h.replace("#/"+e.d));else if(e.a!=b||j)f.lfirst||(f.lfirst=1,q.pushState(f.storage,c,b,0,1)),a=["<script>","lfirst=1;",,"storage="+v(a)+";","\x3c/script>"],a[2]='parent.location.hash="'+
e.d.replace(/"/g,'\\"')+'";',n.open(),n.write(a.join("")),n.close();j||(b=k().a,d=setInterval(g,100))}else f.storage=a},c.attachEvent("unload",function(){if(f.storage){var a={};a[k().a]=f.storage;x.cookie="_historyAPI="+escape(v(a))}clearInterval(d)}),1<a.length)){a=unescape(a.pop().split(";").shift());try{f.storage=F(a)[k().a]}catch(e){}}}(x.cookie.split("_historyAPI="),k().a)):q.emulate=!n;var y="",w=function(){var a=k().c;if(!y||y!=a)B(3,y,a),y=a};c.addEventListener?(c.addEventListener("popstate",
w),c.addEventListener("hashchange",w)):(c.attachEvent("popstate",w),c.attachEvent("hashchange",w));w=T=z=G=r}.call(window);
