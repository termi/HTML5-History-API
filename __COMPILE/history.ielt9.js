/*Copyright 2011-2013, Dmitriy Pakhtinov ( spb.piksel@gmail.com ) and github.com/termi */
void function(){"use strict";var p=void 0,r=null,s=!1;function L(a){if(!a.__history_shim__){var c=h();if(M)return N=c.a,M=0;var d=a.oldURL||N;a=N=a.newURL||c.a;var c=d.replace(/^.*?(#|$)/,""),b=a.replace(/^.*?(#|$)/,"");d!=a&&!O&&B(p);y=O=0;c!=b&&B(2,d,a)}}function Y(){if(y&&!(y=0)&&Z.e!==$)clearInterval(aa),setTimeout(B,10)}function ba(a){var c=a||b.event,d=c.target||c.srcElement;a="defaultPrevented"in c?c.defaultPrevented:c.returnValue===s;if(d&&("A"===d.nodeName&&!a)&&(a=h(d.getAttribute("href",2),!0),a.b&&"#"!==a.b&&a.b===a.a.replace(h().a.split("#").shift(),
""))){history.location.hash=a.b;a=a.b.replace(/^#/,"");if((d=document.getElementById(a))&&d.id===a&&"A"===d.nodeName)d=d.getBoundingClientRect(),window.scrollTo(E.scrollLeft||0,d.top+(E.scrollTop||0)-(E.clientTop||0));c.preventDefault?c.preventDefault():c.returnValue=s}}function ca(a){y===f.href&&(a.stopImmediatePropagation?a.stopImmediatePropagation():a.stopPropagation(),y=0);b.removeEventListener("popstate",ca,s)}function B(a,c,d){var k=new C(2==a?"hashchange":3==a?"pagechange":"popstate");c!=p&&
(k.oldUrl=c);d!=p&&(k.newUrl=d);k.__history_shim__=!0;if(!n&&a==p&&b.onpopstate)b.onpopstate(k);if(b.dispatchEvent)b.dispatchEvent(k);else{var e;if(a=q[k.type])for(var f in a)a.hasOwnProperty(f)&&("function"==typeof(e=a[f])||e&&"object"==typeof e&&(e=e.handleEvent))&&e.call(b,k)}}function P(a){return F?a?F.setItem("__hitoryapi__",Q(a)):da(F.getItem("__hitoryapi__"))||{}:{}}function G(a,c,d){var k=a,e,f=s;try{if(1!==Object.defineProperty({},"t",{get:function(){return 1}}).t)throw Error;Object.defineProperties(a,
c)}catch(h){if(a.__defineGetter__)for(var g in c)H(c,g)&&(a.__defineGetter__(g,c[g].get),c[g].set&&a.__defineSetter__(g,c[g].set));if(d)return s;f=!0}if(!d&&f&&z){d="StaticClass"+ea+z++;k=["Class "+d];"execVB"in b||execScript("Function execVB(c) ExecuteGlobal(c) End Function","VBScript");"VBCVal"in b||execScript("Function VBCVal(o,r) If IsObject(o) Then Set r=o Else r=o End If End Function","VBScript");for(e in a)k.push("Public ["+e+"]");H(a,"toString")&&(a.propertyIsEnumerable("toString")||k.push("Public [toString]"),
c["(toString)"]={get:function(){return this.toString.call(this)}});for(e in c)H(c,e)&&(c[e].get&&(a["get "+e]=c[e].get,k.push("Public [get "+e+"]","Public "+("(toString)"===e?"Default ":"")+"Property Get ["+e+"]","Call VBCVal(me.[get "+e+"].call(me),["+e+"])","End Property")),c[e].set&&(a["set "+e]=c[e].set,k.push("Public [set "+e+"]","Public Property Let ["+e+"](v)","Call me.[set "+e+"].call(me,v)","End Property","Public Property Set ["+e+"](v)","Call me.[set "+e+"].call(me,v)","End Property")));
k.push("End Class","Function "+d+"Factory()","Set "+d+"Factory=New "+d,"End Function");b.execVB(k.join("\n"));k=b[d+"Factory"]();for(e in a)k[e]=a[e];H(a,"toString")&&(k.toString=a.toString)}return k}var b=this,l=b.JSON||{},t=document,E=t.documentElement,C=b.j,v=Function.prototype.bind||s,ka=Array.prototype.slice,R=Function.prototype.call,H=v.call(R,Object.prototype.hasOwnProperty),u=b.history||{},f=b.location,n="pushState"in u,la=n&&u.state===p,y=f.href,S=u.pushState,fa=u.replaceState,da=l.parse,
Q=l.stringify,F=b.sessionStorage,I=(l=b["ev"+(t.documentMode||t.attachEvent?"":ka)+"al"])&&l("/*@cc_on 1;@*/")&&+((/msie (\d+)/i.exec(navigator.userAgent)||[])[1]||0)||p,ea=(new Date).getTime(),z=S||!I||8<I?0:1,g=8>I?t.createElement("iframe"):0,q,M=0,ma=/[^\/]+$/g,$=location.pathname.split("#")[0].split("?")[0],h,j=t.createElement("a"),ga,T,ha,U,J,D,w,na=/^[^#]*/;h=function(a,c){if(a){if(!n||I){var d=h(),b=d.f,e=d.i,g=a.charAt(0);a=/^(?:[\w0-9]+\:)?\/\//.test(a)?"/"==g?e+a:a:e+"//"+d.h+("/"==g?a:
"?"==g?b+a:"#"==g?b+d.g+a:b.replace(ma,"")+a)}}else if(a=f.href,!n||c)a=f.protocol+"//"+f.host+(-1!=a.indexOf("#")?"/":$)+(a.replace(na,"")||"#").replace(/^#[\/]?(?:\/)?/,"");if(ga!==a){j.href=ga=a;D=j.port;J=j.host;w=j.pathname;if("http:"===j.protocol&&80==D||"https:"===j.protocol&&443==D)J=j.hostname,D="";w="/"==w.charAt(0)?w:"/"+w;T=w+j.search+j.hash;U=w+j.search;ha=U+j.hash}return{a:j.protocol+"//"+J+T,i:j.protocol,h:J,k:j.hostname||f.hostname,l:D||f.port,f:w,g:j.search,b:j.hash,e:T,c:U,d:ha}};
var m=!z&&u||{back:u.back,forward:u.forward,go:u.go,pushState:p,replaceState:p,emulate:!n,toString:function(){return"[object History]"}},l={state:{get:function(){return g&&g.storage||P()[m.location.href]||r}},length:{get:function(){return u.length}},location:{set:function(a){b.location=a},get:function(){return n?f:V}}},V={assign:function(a){f.assign(n||0!==a.indexOf("#")?a:"#"+h().c+a)},reload:f.reload,replace:function(a){f.replace(n||0!==a.indexOf("#")?a:"#"+h().c+a)},toString:function(){return this.href}},
W,ia=b.onpopstate||r,ja=b.onhashchange||r,O=0,aa=r,Z=h(),N=Z.a;b.addEventListener?b.addEventListener("hashchange",L,s):b.attachEvent("onhashchange",L);b.addEventListener&&(b.addEventListener("popstate",ca,s),b.addEventListener("popstate",function(){y=0;O=1},s));m=G(m,z?l:u.state===p?{state:l.state,location:l.location}:{location:l.location});V=G(V,{href:{set:function(a){f.href=a},get:function(){return h().a}},protocol:{set:function(a){f.protocol=a},get:function(){return f.protocol}},host:{set:function(a){f.host=
a},get:function(){return f.host}},hostname:{set:function(a){f.hostname=a},get:function(){return f.hostname}},port:{set:function(a){f.port=a},get:function(){return f.port}},pathname:{set:function(a){f.pathname=a},get:function(){return h().f}},search:{set:function(a){f.search=a},get:function(){return h().g}},hash:{set:function(a){a=0===a.indexOf("#")?a:"#"+a;var c=h();g?a!=c.b&&(m.pushState(r,r,c.c+a),W({oldURL:c.a})):f.hash="#"+c.c+a},get:function(){return h().b}},origin:{}});z&&execScript("Public history, onhashchange",
"VBScript");!("onpopstate"in b||G(b,{onhashchange:{get:function(){return ja},set:function(a){ja=a||r}},onpopstate:{get:function(){return ia},set:function(a){(ia=a||r)&&!n&&Y()}}},!0))&&!n&&(aa=setInterval(function(){b.onpopstate&&Y()},100));n||(document.addEventListener?document.addEventListener("click",ba,s):document.attachEvent("onclick",ba));W=L;try{new C("click")}catch(oa){C=r}C||(C=function(a){var c;t.createEvent?(c=t.createEvent("Events"),c.initEvent(a,s,s)):(c=t.createEventObject(),c.type=
a);return c});b.addEventListener||(q={popstate:{},hashchange:{}},q.onpopstate=q.popstate,q.onhashchange=q.hashchange,q.onpagechange=q.pagechange={},b.attachEvent=v.call(function(a,c,d){if(c in q){c=q[c];if(!(a=d.uuid))a=d.uuid="_"+ +new Date;c[a]||(c[a]=d)}else R.call(a,b,c,d)},b,b.attachEvent),b.detachEvent=v.call(function(a,c,d){var f;c in q?(a=d.uuid)&&(f=q[c])&&delete f[a]:R.call(a,b,c,d)},b,b.detachEvent));m.pushState=function(a,c,d,b){var e=P(),g=h().a,j=d&&h(d);y=0;d=j?j.a:g;b&&e[g]&&delete e[g];
if((!n||la)&&F&&a)e[d]=a,P(e),a=r;S&&fa?b?fa.call(m,a,c,d):S.call(m,a,c,d):j&&j.e!=h().e&&(M=1,b?f.replace("#"+j.d):f.hash=j.d);a=h().c;if(!x||x!=a)B(3,x,a),x=a};m.replaceState=function(a,c,b){m.pushState(a,c,b,1)};if(z){b.history=m;var v=t.cookie.split("_historyAPI="),A=h().a,K,X;if(g&&(X=function(){var a=h().a;A!=a&&W({oldURL:A,newURL:A=a})},K=setInterval(X,100),g.src="javascript:true;",g=E.firstChild.appendChild(g).contentWindow,m.pushState=function(a,c,b,j,e){var l=g.document;if(b=b&&h(b)){e||
clearInterval(K);if(j)g.lfirst?(history.back(),m.pushState(a,c,b.a,0,1)):(g.storage=a,f.replace("#/"+b.d));else if(b.a!=A||e)g.lfirst||(g.lfirst=1,m.pushState(g.storage,c,A,0,1)),a=["<script>","lfirst=1;",,"storage="+Q(a)+";","\x3c/script>"],a[2]='parent.location.hash="'+b.d.replace(/"/g,'\\"')+'";',l.open(),l.write(a.join("")),l.close();e||(A=h().a,K=setInterval(X,100))}else g.storage=a},b.attachEvent("unload",function(){if(g.storage){var a={};a[h().a]=g.storage;t.cookie="_historyAPI="+escape(Q(a))}clearInterval(K)}),
1<v.length)){v=unescape(v.pop().split(";").shift());try{g.storage=da(v)[h().a]}catch(pa){}}}else m.emulate=!n;var x="",l=function(){var a=h().c;if(!x||x!=a)B(3,x,a),x=a};b.addEventListener?(b.addEventListener("popstate",l),b.addEventListener("hashchange",l)):(b.attachEvent("popstate",l),b.attachEvent("hashchange",l));l=ea=z=G=p}.call(window);
