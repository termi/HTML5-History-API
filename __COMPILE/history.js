/*Copyright 2011-2013, Dmitriy Pakhtinov ( spb.piksel@gmail.com ) and github.com/termi */
void function(){var k=void 0,q=null,r=!1;function I(a){if(!a.__history_shim__){var m=e();if(z)return A=m.a,z=0;var c=a.oldURL||A;a=A=a.newURL||m.a;var m=c.replace(/^.*?(#|$)/,""),b=a.replace(/^.*?(#|$)/,"");c!=a&&!B&&t(k);s=B=0;m!=b&&t(2,c,a)}}function U(a){var m=a||r,c=m.target||r;a=m.defaultPrevented;if(c&&("A"===c.nodeName&&!a)&&(a=e(c.getAttribute("href",2),!0),a.b&&"#"!==a.b&&a.b===a.a.replace(e().a.split("#").shift(),""))){history.location.hash=a.b;a=a.b.replace(/^#/,"");if((c=document.getElementById(a))&&c.id===a&&
"A"===c.nodeName)c=c.getBoundingClientRect(),window.scrollTo(C.scrollLeft||0,c.top+(C.scrollTop||0)-(C.clientTop||0));m.preventDefault()}}function J(a){s===b.href&&(a.stopImmediatePropagation?a.stopImmediatePropagation():a.stopPropagation(),s=0);d.removeEventListener("popstate",J,r)}function t(a,m,c){var b=new u(2==a?"hashchange":3==a?"pagechange":"popstate");m!=k&&(b.oldUrl=m);c!=k&&(b.newUrl=c);b.__history_shim__=!0;if(!n&&a==k&&d.onpopstate)d.onpopstate(b);d.dispatchEvent(b)}function D(a){return w?
a?w.setItem("__hitoryapi__",V(a)):W(w.getItem("__hitoryapi__"))||{}:{}}function x(a,b,c){try{if(1!==Object.defineProperty({},"t",{get:function(){return 1}}).t)throw Error;Object.defineProperties(a,b)}catch(d){if(a.__defineGetter__)for(var e in b)X(b,e)&&(a.__defineGetter__(e,b[e].get),b[e].set&&a.__defineSetter__(e,b[e].set));if(c)return r}return a}var d=this,f=d.JSON||{},E=document,C=E.documentElement,u=d.j,X=(Function.prototype.bind||r).call(Function.prototype.call,Object.prototype.hasOwnProperty),
h=d.history||{},b=d.location,n="pushState"in h,Y=n&&h.state===k,s=b.href,K=h.pushState,L=h.replaceState,W=f.parse,V=f.stringify,w=d.sessionStorage,M=k,f=k,z=0,Z=/[^\/]+$/g,N=location.pathname.split("#")[0].split("?")[0],e,g=E.createElement("a"),O,F,P,G,y,v,l,$=/^[^#]*/,aa=/^(?:[a-z]+\:)?\/\//;e=function(a,d){if(a){if(!n||M){var c=e(),f=c.e,p=c.i,j=a.charAt(0);a=aa.test(a)?"/"==j?p+a:a:p+"//"+c.h+("/"==j?a:"?"==j?f+a:"#"==j?f+c.f+a:f.replace(Z,"")+a)}}else if(a=b.href,!n||d)a=b.protocol+"//"+b.host+
(-1!=a.indexOf("#")?"/":N)+(a.replace($,"")||"#").replace(/^#[\/]?(?:\/)?/,"");if(O!==a){g.href=O=a;v=g.port;y=g.host;l=g.pathname;if("http:"===g.protocol&&80==v||"https:"===g.protocol&&443==v)y=g.hostname,v="";l="/"==l.charAt(0)?l:"/"+l;F=l+g.search+g.hash;G=l+g.search;P=G+g.hash}return{a:g.protocol+"//"+y+F,i:g.protocol,h:y,k:g.hostname||b.hostname,l:v||b.port,e:l,f:g.search,b:g.hash,d:F,c:G,g:P}};var p=!f&&h||r,f={get:function(){return D()[p.location.href]||q}},Q={set:function(a){d.location=a},
get:function(){return n?b:H}},H={assign:function(a){b.assign(n||0!==a.indexOf("#")?a:"#"+e().c+a)},reload:b.reload,replace:function(a){b.replace(n||0!==a.indexOf("#")?a:"#"+e().c+a)},toString:function(){return this.href}},R=d.onpopstate||q,S=d.onhashchange||q,B=0,T=e(),A=T.a;d.addEventListener?d.addEventListener("hashchange",I,r):d.attachEvent("onhashchange",I);d.addEventListener&&(d.addEventListener("popstate",J,r),d.addEventListener("popstate",function(){s=0;B=1},r));p=x(p,h.state===k?{state:f,
location:Q}:{location:Q});H=x(H,{href:{set:function(a){b.href=a},get:function(){return e().a}},protocol:{set:function(a){b.protocol=a},get:function(){return b.protocol}},host:{set:function(a){b.host=a},get:function(){return b.host}},hostname:{set:function(a){b.hostname=a},get:function(){return b.hostname}},port:{set:function(a){b.port=a},get:function(){return b.port}},pathname:{set:function(a){b.pathname=a},get:function(){return e().e}},search:{set:function(a){b.search=a},get:function(){return e().f}},
hash:{set:function(a){a=0===a.indexOf("#")?a:"#"+a;var d=e();b.hash="#"+d.c+a},get:function(){return e().b}},origin:{}});"onpopstate"in d||x(d,{onhashchange:{get:function(){return S},set:function(a){S=a||q}},onpopstate:{get:function(){return R},set:function(a){if(R=a||q)if(!n&&s&&!(s=0)&&T.d!==N)clearInterval(q),setTimeout(t,10)}}},!0);n||document.addEventListener("click",U,r);try{new u("click")}catch(ba){u=q}u||(u=function(a){var b;b=E.createEvent("Events");b.initEvent(a,r,r);return b});p.pushState=
function(a,d,c,g){var f=D(),l=e().a,h=c&&e(c);s=0;c=h?h.a:l;g&&f[l]&&delete f[l];if((!n||Y)&&w&&a)f[c]=a,D(f),a=q;K&&L?g?L.call(p,a,d,c):K.call(p,a,d,c):h&&h.d!=e().d&&(z=1,g?b.replace("#"+h.g):b.hash=h.g);a=e().c;if(!j||j!=a)t(3,j,a),j=a};p.replaceState=function(a,b,c){p.pushState(a,b,c,1)};d.history.emulate=!n;var j="",f=function(){var a=e().c;if(!j||j!=a)t(3,j,a),j=a};d.addEventListener("popstate",f);d.addEventListener("hashchange",f);f=M=f=x=k}.call(window);
