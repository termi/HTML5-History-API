/*
 Copyright 2011-2013, github.com/termi/HTML5-History-API, original by Dmitriy Pakhtinov ( spb.piksel@gmail.com ) */
void function(){"use strict";var k=void 0,l=null,p=!1;
function E(a){if(!a.__history_shim__){var n=j();if(F)return G=n.a,F=0;var c=a.oldURL||G;a=G=a.newURL||n.a;var n=c.replace(/^.*?(#|$)/,""),b=a.replace(/^.*?(#|$)/,"");c!=a&&!H&&t(k);s=H=0;n!=b&&t(2,c,a)}}function aa(a){var n=a||p,c=n.target||p;a=n.defaultPrevented;if(c&&("A"===c.nodeName&&!a)&&(a=j(c.getAttribute("href",2),!0),a.b&&"#"!==a.b&&a.b===a.a.replace(j().a.split("#").shift(),""))){history.location.hash=a.b;a=a.b.replace(/^#/,"");if((c=document.getElementById(a))&&c.id===a&&
"A"===c.nodeName)c=c.getBoundingClientRect(),window.scrollTo(I.scrollLeft||0,c.top+(I.scrollTop||0)-(I.clientTop||0));n.preventDefault()}}function J(a){s===e.href&&(a.stopImmediatePropagation?a.stopImmediatePropagation():a.stopPropagation(),s=0);d.removeEventListener("popstate",J,p);J=l}function t(a,n,c){var b=new u(2==a?"hashchange":3==a?"pagechange":"popstate");n!=k&&(b.oldUrl=n);c!=k&&(b.newUrl=c);b.__history_shim__=!0;if(!m&&a==k&&d.onpopstate)d.onpopstate(b);d.dispatchEvent(b)}function K(a){return y?
a?y.setItem("__history_shim__",ba(a)):ca(y.getItem("__history_shim__"))||{}:{}}function z(a,b,c){return A?(A(a,b),a):c?a:k}function Q(a,b,c,d){var h=K(),f=j().a,g=c&&j(c);s=0;c=g?g.a:f;d&&h[f]&&delete h[f];if((!m||da)&&y&&a)h[c]=a,K(h),a=l;L&&B?d?B.call(this,a,b,c):R&&"/"==g.d?(L.call(this,a,b,c+"?"),B.call(this,a,b,c)):L.call(this,a,b,c):g&&g.e!=j().e&&(F=1,d?e.replace("#"+g.g):e.hash=g.g);a=j().c;if(!q||q!=a)t(3,q,a),q=a}function S(a,b,c){this.pushState(a,b,c,1)}var d=this,b,C=document,I=C.documentElement,
f=Function.prototype.call,v=Function.prototype.bind||p,ea=C.documentMode&&/msie (\d+)/i.test(navigator.userAgent),R=(b=d.opera)&&"function"==typeof(b=b.version)&&+b();b=d.JSON||{};var ca=b.parse,ba=b.stringify,u=d.j,T=v.call(f,Object.prototype.hasOwnProperty),g=d.history||{},f=(b=d.history)&&(b=b.__proto__||(b=b.constructor)&&b.prototype)&&b&&b!=Object.prototype&&b||d.history,e=d.location,m="pushState"in g,da=m&&g.state===k,s=e.href,L=g.pushState,B=g.replaceState,y=d.sessionStorage,A;if(b=Object.defineProperty&&
function(a,b){var c,d;for(d in b)T(b,d)&&(c=b[d],"object"!=typeof c&&(c={value:c}),"configurable"in c||(c.configurable=!0),Object.defineProperty(a,d,c))}){try{b(f,{_:{get:function(){return 1},configurable:!0}})}catch(ha){b=l}1!==f._&&(b=l);"_"in f&&delete f._}!b&&f.__defineGetter__&&(b=function(a,b){var c,d;if(a.__defineGetter__)for(d in b)T(b,d)&&(c=b[d],c.get&&a.__defineGetter__(d,c.get),c.set&&a.__defineSetter__(d,c.set));return a});A=b;var M=k,F=0,fa=/[^\/]+$/g,U=location.pathname.split("#")[0].split("?")[0],
j,h=C.createElement("a"),V,N,W,O,D,w,r,ga=/^[^#]*/;j=function(a,b){if(a){if(!m||M||ea){var c=j(),d=c.d,f=c.i,g=a.charAt(0);a=/^(?:[\w0-9]+\:)?\/\//.test(a)?"/"==g?f+a:a:f+"//"+c.h+("/"==g?a:"?"==g?d+a:"#"==g?d+c.f+a:d.replace(fa,"")+a)}}else if(a=e.href,!m||b)a=e.protocol+"//"+e.host+(-1!=a.indexOf("#")?"/":U)+(a.replace(ga,"")||"#").replace(/^#[\/]?(?:\/)?/,"");if(V!==a){h.href=V=a;w=h.port;D=h.host;r=h.pathname;if("http:"===h.protocol&&80==w||"https:"===h.protocol&&443==w)D=h.hostname,w="";r="/"==
r.charAt(0)?r:"/"+r;N=r+h.search+h.hash;O=r+h.search;W=O+h.hash}return{a:h.protocol+"//"+D+N,i:h.protocol,h:D,k:h.hostname||e.hostname,l:w||e.port,d:r,f:h.search,b:h.hash,e:N,c:O,g:W}};b=!M&&f;var X=p,f={state:{get:function(){return K()[this.location.href]||l}},length:{get:function(){return g.length}},location:{set:function(a){d.location.href=a},get:function(){return m?e:P}}},P={assign:function(a){e.assign(m||0!==a.indexOf("#")?a:"#"+j().c+a)},reload:e.reload,replace:function(a){e.replace(m||0!==
a.indexOf("#")?a:"#"+j().c+a)},toString:function(){return this.href}},v={href:{set:function(a){e.href=a},get:function(){return j().a}},protocol:{set:function(a){e.protocol=a},get:function(){return e.protocol}},host:{set:function(a){e.host=a},get:function(){return e.host}},hostname:{set:function(a){e.hostname=a},get:function(){return e.hostname}},port:{set:function(a){e.port=a},get:function(){return e.port}},pathname:{set:function(a){e.pathname=a},get:function(){return j().d}},search:{set:function(a){e.search=
a},get:function(){return j().f}},hash:{set:function(a){a=0===a.indexOf("#")?a:"#"+a;var b=j();m?e.hash="#"+b.c+a:a!=b.b&&((X||g).pushState(l,l,b.c+a),Y({oldURL:b.a}))},get:function(){return j().b}},origin:{}},Y,Z=d.onpopstate||l,x=d.onhashchange,H=0,$=j(),G=$.a;d.addEventListener("hashchange",E,p);x===k&&setInterval(function(){E({})},100);x||(x=l);d.addEventListener&&m&&(d.addEventListener("popstate",J,p),d.addEventListener("popstate",function(a){s=0;H=1;R&&B.call(g,a.state,document.title,location.href)},
p));b&&z(b,g.state===k?{state:f.state,location:f.location}:{location:f.location});P=z(P,v);"onpopstate"in d||z(d,{onhashchange:{get:function(){return x},set:function(a){x=a||l}},onpopstate:{get:function(){return Z},set:function(a){if(Z=a||l)if(!m&&s&&!(s=0)&&$.e!==U)clearInterval(l),setTimeout(t,10)}}},!0);m||document.addEventListener("click",aa,p);Y=E;try{new u("click")}catch(ia){u=l}u||(u=function(a){var b;b=C.createEvent("Events");b.initEvent(a,p,p);return b});b.pushState=Q;b.replaceState=S;b.emulate=
!m;var q=j().c;b=function(){var a=j().c;if(!q||q!=a)t(3,q,a),q=a};d.addEventListener("popstate",b,p);d.addEventListener("hashchange",b,p);b=M=z=A=v=X=f=v=f=b=Q=S=l}.call(window);
