/*Copyright 2011-2013, Dmitriy Pakhtinov ( spb.piksel@gmail.com ) and github.com/termi */
void function(){"use strict";var l=void 0,m=null,p=!1;function T(a){var t=a||p,c=t.target||p;a=t.defaultPrevented;if(c&&("A"===c.nodeName&&!a)&&(a=h(c.getAttribute("href",2),!0),a.b&&"#"!==a.b&&a.b===a.a.replace(h().a.split("#").shift(),""))){history.location.hash=a.b;a=a.b.replace(/^#/,"");if((c=document.getElementById(a))&&c.id===a&&"A"===c.nodeName)c=c.getBoundingClientRect(),window.scrollTo(C.scrollLeft||0,c.top+(C.scrollTop||0)-(C.clientTop||0));t.preventDefault()}}function D(a){r===b.href&&(a.stopImmediatePropagation?a.stopImmediatePropagation():
a.stopPropagation(),r=0);d.removeEventListener("popstate",D,p);D=m}function u(a,t,c){var b=new v(2==a?"hashchange":3==a?"pagechange":"popstate");t!=l&&(b.oldUrl=t);c!=l&&(b.newUrl=c);b.__history_shim__=!0;if(!n&&a==l&&d.onpopstate)d.onpopstate(b);d.dispatchEvent(b)}function E(a){return y?a?y.setItem("__history_shim__",U(a)):V(y.getItem("__history_shim__"))||{}:{}}function z(a,b,c){return A?(A(a,b),a):c?a:l}var d=this,e=d.JSON||{},w=document,C=w.documentElement,v=d.j,g=Function.prototype.bind||p,W=
Array.prototype.slice,X=g.call(Function.prototype.call,Object.prototype.hasOwnProperty),s=d.history||{},b=d.location,n="pushState"in s,Y=n&&s.state===l,r=b.href,L=s.pushState,M=s.replaceState,V=e.parse,U=e.stringify,y=d.sessionStorage,Z=(e=d["ev"+(w.documentMode||w.attachEvent?"":W)+"al"])&&e("/*@cc_on 1;@*/")&&+((/msie (\d+)/i.exec(navigator.userAgent)||[])[1]||0)||l,A,e={};if(g=Object.defineProperties){try{g(e,{"0":{get:function(){return 1}}})}catch(ba){g=m}1!==e["0"]&&(g=l)}!g&&e.__defineGetter__&&
(g=function(a,b){var c,d;if(a.__defineGetter__)for(d in b)X(b,d)&&(c=b[d],c.get&&a.__defineGetter__(d,c.get),c.set&&a.__defineSetter__(d,c.set));return a});e=m;A=g;var e=l,F=0,$=/[^\/]+$/g,N=location.pathname.split("#")[0].split("?")[0],h,f=w.createElement("a"),O,G,P,H,B,x,j,aa=/^[^#]*/;h=function(a,d){if(a){if(!n||Z){var c=h(),e=c.e,g=c.i,k=a.charAt(0);a=/^(?:[\w0-9]+\:)?\/\//.test(a)?"/"==k?g+a:a:g+"//"+c.h+("/"==k?a:"?"==k?e+a:"#"==k?e+c.f+a:e.replace($,"")+a)}}else if(a=b.href,!n||d)a=b.protocol+
"//"+b.host+(-1!=a.indexOf("#")?"/":N)+(a.replace(aa,"")||"#").replace(/^#[\/]?(?:\/)?/,"");if(O!==a){f.href=O=a;x=f.port;B=f.host;j=f.pathname;if("http:"===f.protocol&&80==x||"https:"===f.protocol&&443==x)B=f.hostname,x="";j="/"==j.charAt(0)?j:"/"+j;G=j+f.search+f.hash;H=j+f.search;P=H+f.hash}return{a:f.protocol+"//"+B+G,i:f.protocol,h:B,k:f.hostname||b.hostname,l:x||b.port,e:j,f:f.search,b:f.hash,d:G,c:H,g:P}};var k=!e&&s||p,e={state:{get:function(){return E()[k.location.href]||m}},length:{get:function(){return s.length}},
location:{set:function(a){d.location=a},get:function(){return n?b:I}}},I={assign:function(a){b.assign(n||0!==a.indexOf("#")?a:"#"+h().c+a)},reload:b.reload,replace:function(a){b.replace(n||0!==a.indexOf("#")?a:"#"+h().c+a)},toString:function(){return this.href}},g={href:{set:function(a){b.href=a},get:function(){return h().a}},protocol:{set:function(a){b.protocol=a},get:function(){return b.protocol}},host:{set:function(a){b.host=a},get:function(){return b.host}},hostname:{set:function(a){b.hostname=
a},get:function(){return b.hostname}},port:{set:function(a){b.port=a},get:function(){return b.port}},pathname:{set:function(a){b.pathname=a},get:function(){return h().e}},search:{set:function(a){b.search=a},get:function(){return h().f}},hash:{set:function(a){a=0===a.indexOf("#")?a:"#"+a;var d=h();b.hash="#"+d.c+a},get:function(){return h().b}},origin:{}},Q=d.onpopstate||m,R=d.onhashchange||m,J=0,S=h(),K=S.a;d.addEventListener("hashchange",function(a){if(!a.__history_shim__){var b=h();if(F)return K=
b.a,F=0;var c=a.oldURL||K;a=K=a.newURL||b.a;var b=c.replace(/^.*?(#|$)/,""),d=a.replace(/^.*?(#|$)/,"");c!=a&&!J&&u(l);r=J=0;b!=d&&u(2,c,a)}},p);d.addEventListener&&(d.addEventListener("popstate",D,p),d.addEventListener("popstate",function(){r=0;J=1},p));k=z(k,s.state===l?{state:e.state,location:e.location}:{location:e.location});I=z(I,g);"onpopstate"in d||z(d,{onhashchange:{get:function(){return R},set:function(a){R=a||m}},onpopstate:{get:function(){return Q},set:function(a){if(Q=a||m)if(!n&&r&&
!(r=0)&&S.d!==N)clearInterval(m),setTimeout(u,10)}}},!0);n||document.addEventListener("click",T,p);try{new v("click")}catch(ca){v=m}v||(v=function(a){var b;b=w.createEvent("Events");b.initEvent(a,p,p);return b});k.pushState=function(a,d,c,e){var f=E(),g=h().a,j=c&&h(c);r=0;c=j?j.a:g;e&&f[g]&&delete f[g];if((!n||Y)&&y&&a)f[c]=a,E(f),a=m;L&&M?e?M.call(k,a,d,c):L.call(k,a,d,c):j&&j.d!=h().d&&(F=1,e?b.replace("#"+j.g):b.hash=j.g);a=h().c;if(!q||q!=a)u(3,q,a),q=a};k.replaceState=function(a,b,c){k.pushState(a,
b,c,1)};k.emulate=!n;var q="",e=function(){var a=h().c;if(!q||q!=a)u(3,q,a),q=a};d.addEventListener("popstate",e);d.addEventListener("hashchange",e);e=e=z=A=g=e=g=m}.call(window);
