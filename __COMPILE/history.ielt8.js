/*Copyright 2011-2013, Dmitriy Pakhtinov ( spb.piksel@gmail.com ) and github.com/termi */
void function(){"use strict";var n=void 0,r=!0,t=null,D=!1;function N(a){if(!a.__history_shim__){var d=j();if(S)return T=d.a,S=0;var c=a.oldURL||T;a=T=a.newURL||d.a;var d=c.replace(/^.*?(#|$)/,""),b=a.replace(/^.*?(#|$)/,"");c!=a&&!U&&G(n);A=U=0;d!=b&&G(2,c,a)}}function da(){if(A&&!(A=0)&&ea.e!==fa)clearInterval(ga),setTimeout(G,10)}function ha(a){var d=a||b.event,c=d.target||d.srcElement;a="defaultPrevented"in d?d.defaultPrevented:d.returnValue===D;if(c&&("A"===c.nodeName&&!a)&&(a=j(c.getAttribute("href",2),r),a.b&&"#"!==a.b&&a.b===a.a.replace(j().a.split("#").shift(),
""))){history.location.hash=a.b;a=a.b.replace(/^#/,"");if((c=document.getElementById(a))&&c.id===a&&"A"===c.nodeName)c=c.getBoundingClientRect(),window.scrollTo(O.scrollLeft||0,c.top+(O.scrollTop||0)-(O.clientTop||0));d.preventDefault?d.preventDefault():d.returnValue=D}}function V(a){A===g.href&&(a.stopImmediatePropagation?a.stopImmediatePropagation():a.stopPropagation(),A=0);b.removeEventListener("popstate",V,D);V=t}function G(a,d,c){var l=new H(2==a?"hashchange":3==a?"pagechange":"popstate");d!=
n&&(l.oldUrl=d);c!=n&&(l.newUrl=c);l.__history_shim__=r;if(!p&&a==n&&b.onpopstate)b.onpopstate(l);if(b.dispatchEvent)b.dispatchEvent(l);else{var e;if(a=q[l.type])for(var g in a)a.hasOwnProperty(g)&&("function"==typeof(e=a[g])||e&&"object"==typeof e&&(e=e.handleEvent))&&e.call(b,l)}}function W(a){return P?a?P.setItem("__history_shim__",X(a)):ia(P.getItem("__history_shim__"))||{}:{}}function I(a,d,c){if(J)return J(a,d),a;if(c)return a;if(!c&&u){c="StaticClass"+u++;var l=["Class "+c],e;"execVB"in b||
b.execScript("Function execVB(c) ExecuteGlobal(c) End Function","VBScript");"VBCVal"in b||b.execScript("Function VBCVal(o,r) If IsObject(o) Then Set r=o Else r=o End If End Function","VBScript");for(e in a)l.push("Public ["+e+"]");K(a,"toString")&&(a.propertyIsEnumerable("toString")||l.push("Public [toString]"),d["(toString)"]={get:function(){return this.toString.call(this)}});for(e in d)K(d,e)&&(d[e].get&&(a["get "+e]=d[e].get,l.push("Public [get "+e+"]","Public "+("(toString)"===e?"Default ":"")+
"Property Get ["+e+"]","Call VBCVal(me.[get "+e+"].call(me),["+e+"])","End Property")),d[e].set&&(a["set "+e]=d[e].set,l.push("Public [set "+e+"]","Public Property Let ["+e+"](v)","Call me.[set "+e+"].call(me,v)","End Property","Public Property Set ["+e+"](v)","Call me.[set "+e+"].call(me,v)","End Property")));l.push("End Class","Function "+c+"Factory()","Set "+c+"Factory=New "+c,"End Function");b.execVB(l.join("\n"));l=b[c+"Factory"]();for(e in a)l[e]=a[e];K(a,"toString")&&(l.toString=a.toString)}return l}
var b=this,f=b.JSON||{},ia=f.parse,X=f.stringify,x=document,O=x.documentElement,H=b.j,ja=Array.prototype.slice,v=Function.prototype.bind||function(a,d){var c=this,b=ja.call(arguments,1);return function(){return c.apply(a,b.concat(ja.call(arguments)))}},Y=Function.prototype.call,K=v.call(Y,Object.prototype.hasOwnProperty),s=b.history||{},h=(f=b.history)&&(f.__proto__||(f=f.constructor)&&f.prototype),g=b.location,p="pushState"in s,qa=p&&s.state===n,A=g.href,ka=s.pushState,la=s.replaceState,P=b.sessionStorage,
J;if(f=Object.defineProperty&&function(a,d){var c,b;for(b in d)K(d,b)&&(c=d[b],"object"!=typeof c&&(c={value:c}),"configurable"in c||(c.configurable=r),Object.defineProperty(a,b,c))}){try{f(h,{_:{get:function(){return 1},configurable:r}})}catch(ta){f=t}1!==h._&&(f=t);"_"in h&&delete h._}!f&&h.__defineGetter__&&(f=function(a,d){var c,b;if(a.__defineGetter__)for(b in d)K(d,b)&&(c=d[b],c.get&&a.__defineGetter__(b,c.get),c.set&&a.__defineSetter__(b,c.set));return a});J=f;var u=!J&&b.execScript&&(new Date).getTime()||
n,k=u?x.createElement("iframe"):0,q,S=0,ra=/[^\/]+$/g,fa=location.pathname.split("#")[0].split("?")[0],j,m=x.createElement("a"),ma,Z,na,$,Q,L,y,sa=/^[^#]*/;j=function(a,d){if(a){if(!p||u){var c=j(),b=c.f,e=c.i,f=a.charAt(0);a=/^(?:[\w0-9]+\:)?\/\//.test(a)?"/"==f?e+a:a:e+"//"+c.h+("/"==f?a:"?"==f?b+a:"#"==f?b+c.g+a:b.replace(ra,"")+a)}}else if(a=g.href,!p||d)a=g.protocol+"//"+g.host+(-1!=a.indexOf("#")?"/":fa)+(a.replace(sa,"")||"#").replace(/^#[\/]?(?:\/)?/,"");if(ma!==a){m.href=ma=a;L=m.port;Q=
m.host;y=m.pathname;if("http:"===m.protocol&&80==L||"https:"===m.protocol&&443==L)Q=m.hostname,L="";y="/"==y.charAt(0)?y:"/"+y;Z=y+m.search+m.hash;$=y+m.search;na=$+m.hash}return{a:m.protocol+"//"+Q+Z,i:m.protocol,h:Q,k:m.hostname||g.hostname,l:L||g.port,f:y,g:m.search,b:m.hash,e:Z,c:$,d:na}};var h=!u&&h,f=!h&&{back:s.back,forward:s.forward,go:s.go,pushState:n,replaceState:n,emulate:!p,toString:function(){return"[object History]"}},B={state:{get:function(){return k&&k.storage||W()[this.location.href]||
t}},length:{get:function(){return s.length}},location:{set:function(a){b.location.href=a},get:function(){return p?g:aa}}},aa={assign:function(a){g.assign(p||0!==a.indexOf("#")?a:"#"+j().c+a)},reload:g.reload,replace:function(a){g.replace(p||0!==a.indexOf("#")?a:"#"+j().c+a)},toString:function(){return this.href}},oa={href:{set:function(a){g.href=a},get:function(){return j().a}},protocol:{set:function(a){g.protocol=a},get:function(){return g.protocol}},host:{set:function(a){g.host=a},get:function(){return g.host}},
hostname:{set:function(a){g.hostname=a},get:function(){return g.hostname}},port:{set:function(a){g.port=a},get:function(){return g.port}},pathname:{set:function(a){g.pathname=a},get:function(){return j().f}},search:{set:function(a){g.search=a},get:function(){return j().g}},hash:{set:function(a){a=0===a.indexOf("#")?a:"#"+a;var b=j();k?a!=b.b&&(s.pushState(t,t,b.c+a),ba({oldURL:b.a})):g.hash="#"+b.c+a},get:function(){return j().b}},origin:{}},ba,pa=b.onpopstate||t,M=b.onhashchange,U=0,ga=t,ea=j(),
T=ea.a;b.addEventListener?b.addEventListener("hashchange",N,D):b.attachEvent("onhashchange",N);M===n&&setInterval(function(){N({})},100);M||(M=t);b.addEventListener&&(b.addEventListener("popstate",V,D),b.addEventListener("popstate",function(){A=0;U=1},D));h?I(h,s.state===n?{state:B.state,location:B.location}:{location:B.location}):u&&(f=I(f,B));var B=I,w;a:{var E=aa;try{if(Object.defineProperty(E,"_",{get:function(){return 1},configurable:r}),1===E._){delete E._;w=E;break a}}catch(ua){}w=document.createElement("a");
for(var C in w){delete w[C];try{C in w&&w[C]&&(w[C]=t)}catch(va){}}for(C in E)w[C]=E[C]}aa=B(w,oa);u&&b.execScript("Public history, onhashchange","VBScript");!("onpopstate"in b||I(b,{onhashchange:{get:function(){return M},set:function(a){M=a||t}},onpopstate:{get:function(){return pa},set:function(a){(pa=a||t)&&!p&&da()}}},r))&&!p&&(ga=setInterval(function(){b.onpopstate&&da()},100));p||(document.addEventListener?document.addEventListener("click",ha,D):document.attachEvent("onclick",ha));ba=N;try{new H("click")}catch(wa){H=
t}H||(H=function(a){var b;x.createEvent?(b=x.createEvent("Events"),b.initEvent(a,D,D)):(b=x.createEventObject(),b.type=a);return b});b.addEventListener||(q={popstate:{},hashchange:{}},q.onpopstate=q.popstate,q.onhashchange=q.hashchange,q.onpagechange=q.pagechange={},b.attachEvent=v.call(function(a,d,c){if(d in q){d=q[d];if(!(a=c.uuid))a=c.uuid="_"+ +new Date;d[a]||(d[a]=c)}else Y.call(a,b,d,c)},b,b.attachEvent),b.detachEvent=v.call(function(a,d,c){var f;d in q?(a=c.uuid)&&(f=q[d])&&delete f[a]:Y.call(a,
b,d,c)},b,b.detachEvent));h.pushState=function(a,b,c,f){var e=W(),k=j().a,h=c&&j(c);A=0;c=h?h.a:k;f&&e[k]&&delete e[k];if((!p||qa)&&P&&a)e[c]=a,W(e),a=t;ka&&la?f?la.call(this,a,b,c):ka.call(this,a,b,c):h&&h.e!=j().e&&(S=1,f?g.replace("#"+h.d):g.hash=h.d);a=j().c;if(!z||z!=a)G(3,z,a),z=a};h.replaceState=function(a,b,c){this.pushState(a,b,c,1)};if(u){b.history=f;var v=x.cookie.split("__history_shim__="),F=j().a,R,ca;if(k&&(ca=function(){var a=j().a;F!=a&&ba({oldURL:F,newURL:F=a})},R=setInterval(ca,
100),k.src="javascript:true;",k=O.firstChild.appendChild(k).contentWindow,h.pushState=function(a,b,c,f,e){var h=k.document;if(c=c&&j(c)){e||clearInterval(R);if(f)k.lfirst?(history.back(),this.pushState(a,b,c.a,0,1)):(k.storage=a,g.replace("#/"+c.d));else if(c.a!=F||e)k.lfirst||(k.lfirst=1,this.pushState(k.storage,b,F,0,1)),a=["<script>","lfirst=1;",,"storage="+X(a)+";","\x3c/script>"],a[2]='parent.location.hash="'+c.d.replace(/"/g,'\\"')+'";',h.open(),h.write(a.join("")),h.close();e||(F=j().a,R=setInterval(ca,
100))}else k.storage=a},b.attachEvent("unload",function(){if(k.storage){var a={};a[j().a]=k.storage;x.cookie="__history_shim__="+escape(X(a))}clearInterval(R)}),1<v.length)){v=unescape(v.pop().split(";").shift());try{k.storage=ia(v)[j().a]}catch(xa){}}}else h.emulate=!p;var z="",f=function(){var a=j().c;if(!z||z!=a)G(3,z,a),z=a};b.addEventListener?(b.addEventListener("popstate",f),b.addEventListener("hashchange",f)):(b.attachEvent("popstate",f),b.attachEvent("hashchange",f));f=u=I=J=v=f=B=oa=h=h=
t}.call(window);
