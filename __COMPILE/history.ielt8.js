/*Copyright 2011-2013, Dmitriy Pakhtinov ( spb.piksel@gmail.com ) and github.com/termi */
void function(){var n=void 0,r=!0,s=null,E=!1;function N(a){if(!a.__history_shim__){var e=j();if(S)return T=e.a,S=0;var c=a.oldURL||T;a=T=a.newURL||e.a;var e=c.replace(/^.*?(#|$)/,""),b=a.replace(/^.*?(#|$)/,"");c!=a&&!U&&H(n);A=U=0;e!=b&&H(2,c,a)}}function da(){if(A&&!(A=0)&&ea.e!==fa)clearInterval(ga),setTimeout(H,10)}function ha(a){var e=a||b.event,c=e.target||e.srcElement;a="defaultPrevented"in e?e.defaultPrevented:e.returnValue===E;if(c&&("A"===c.nodeName&&!a)&&(a=j(c.getAttribute("href",2),r),a.b&&"#"!==a.b&&a.b===a.a.replace(j().a.split("#").shift(),
""))){history.location.hash=a.b;a=a.b.replace(/^#/,"");if((c=document.getElementById(a))&&c.id===a&&"A"===c.nodeName)c=c.getBoundingClientRect(),window.scrollTo(O.scrollLeft||0,c.top+(O.scrollTop||0)-(O.clientTop||0));e.preventDefault?e.preventDefault():e.returnValue=E}}function V(a){A===g.href&&(a.stopImmediatePropagation?a.stopImmediatePropagation():a.stopPropagation(),A=0);b.removeEventListener("popstate",V,E);V=s}function H(a,e,c){var l=new I(2==a?"hashchange":3==a?"pagechange":"popstate");e!=
n&&(l.oldUrl=e);c!=n&&(l.newUrl=c);l.__history_shim__=r;if(!p&&a==n&&b.onpopstate)b.onpopstate(l);if(b.dispatchEvent)b.dispatchEvent(l);else{var f;if(a=q[l.type])for(var d in a)a.hasOwnProperty(d)&&("function"==typeof(f=a[d])||f&&"object"==typeof f&&(f=f.handleEvent))&&f.call(b,l)}}function W(a){return P?a?P.setItem("__history_shim__",X(a)):ia(P.getItem("__history_shim__"))||{}:{}}function J(a,e,c){if(K)return K(a,e),a;if(c)return a;if(!c&&v){c="StaticClass"+v++;var l=["Class "+c],f;"execVB"in b||
b.execScript("Function execVB(c) ExecuteGlobal(c) End Function","VBScript");"VBCVal"in b||b.execScript("Function VBCVal(o,r) If IsObject(o) Then Set r=o Else r=o End If End Function","VBScript");for(f in a)F(a,f)&&l.push("Public ["+f+"]");F(a,"toString")&&(a.propertyIsEnumerable("toString")||l.push("Public [toString]"),e["(toString)"]={get:function(){return this.toString.call(this)}});for(f in e)F(e,f)&&(e[f].get&&(a["get "+f]=e[f].get,l.push("Public [get "+f+"]","Public "+("(toString)"===f?"Default ":
"")+"Property Get ["+f+"]","Call VBCVal(me.[get "+f+"].call(me),["+f+"])","End Property")),e[f].set&&(a["set "+f]=e[f].set,l.push("Public [set "+f+"]","Public Property Let ["+f+"](v)","Call me.[set "+f+"].call(me,v)","End Property","Public Property Set ["+f+"](v)","Call me.[set "+f+"].call(me,v)","End Property")));l.push("End Class","Function "+c+"Factory()","Set "+c+"Factory=New "+c,"End Function");b.execVB(l.join("\n"));l=b[c+"Factory"]();for(f in a)l[f]=a[f];F(a,"toString")&&(l.toString=a.toString)}return l}
var b=this,d=b.JSON||{},ia=d.parse,X=d.stringify,x=document,O=x.documentElement,I=b.j,w=Function.prototype.bind||E,Y=Function.prototype.call,F=w.call(Y,Object.prototype.hasOwnProperty),t=b.history||{},h=(d=b.history)&&(d=d.__proto__||(d=d.constructor)&&d.prototype)&&d&&d!=Object.prototype&&d||b.history,g=b.location,p="pushState"in t,pa=p&&t.state===n,A=g.href,ja=t.pushState,ka=t.replaceState,P=b.sessionStorage,K;if(d=Object.defineProperty&&function(a,e){var c,b;for(b in e)F(e,b)&&(c=e[b],"object"!=
typeof c&&(c={value:c}),"configurable"in c||(c.configurable=r),Object.defineProperty(a,b,c))}){try{d(h,{_:{get:function(){return 1},configurable:r}})}catch(sa){d=s}1!==h._&&(d=s);"_"in h&&delete h._}!d&&h.__defineGetter__&&(d=function(a,e){var c,b;if(a.__defineGetter__)for(b in e)F(e,b)&&(c=e[b],c.get&&a.__defineGetter__(b,c.get),c.set&&a.__defineSetter__(b,c.set));return a});K=d;var v=!K&&b.execScript&&(new Date).getTime()||n,k=v?x.createElement("iframe"):0,q,S=0,qa=/[^\/]+$/g,fa=location.pathname.split("#")[0].split("?")[0],
j,m=x.createElement("a"),la,Z,ma,$,Q,L,y,ra=/^[^#]*/;j=function(a,e){if(a){if(!p||v){var c=j(),b=c.f,f=c.i,d=a.charAt(0);a=/^(?:[\w0-9]+\:)?\/\//.test(a)?"/"==d?f+a:a:f+"//"+c.h+("/"==d?a:"?"==d?b+a:"#"==d?b+c.g+a:b.replace(qa,"")+a)}}else if(a=g.href,!p||e)a=g.protocol+"//"+g.host+(-1!=a.indexOf("#")?"/":fa)+(a.replace(ra,"")||"#").replace(/^#[\/]?(?:\/)?/,"");if(la!==a){m.href=la=a;L=m.port;Q=m.host;y=m.pathname;if("http:"===m.protocol&&80==L||"https:"===m.protocol&&443==L)Q=m.hostname,L="";y="/"==
y.charAt(0)?y:"/"+y;Z=y+m.search+m.hash;$=y+m.search;ma=$+m.hash}return{a:m.protocol+"//"+Q+Z,i:m.protocol,h:Q,k:m.hostname||g.hostname,l:L||g.port,f:y,g:m.search,b:m.hash,e:Z,c:$,d:ma}};var h=!v&&h,d=!h&&{back:t.back,forward:t.forward,go:t.go,pushState:n,replaceState:n,emulate:!p,toString:function(){return"[object History]"}},B={state:{get:function(){return k&&k.storage||W()[this.location.href]||s}},length:{get:function(){return t.length}},location:{set:function(a){b.location.href=a},get:function(){return p?
g:aa}}},aa={assign:function(a){g.assign(p||0!==a.indexOf("#")?a:"#"+j().c+a)},reload:g.reload,replace:function(a){g.replace(p||0!==a.indexOf("#")?a:"#"+j().c+a)},toString:function(){return this.href}},na={href:{set:function(a){g.href=a},get:function(){return j().a}},protocol:{set:function(a){g.protocol=a},get:function(){return g.protocol}},host:{set:function(a){g.host=a},get:function(){return g.host}},hostname:{set:function(a){g.hostname=a},get:function(){return g.hostname}},port:{set:function(a){g.port=
a},get:function(){return g.port}},pathname:{set:function(a){g.pathname=a},get:function(){return j().f}},search:{set:function(a){g.search=a},get:function(){return j().g}},hash:{set:function(a){a=0===a.indexOf("#")?a:"#"+a;var b=j();k?a!=b.b&&(t.pushState(s,s,b.c+a),ba({oldURL:b.a})):g.hash="#"+b.c+a},get:function(){return j().b}},origin:{}},ba,oa=b.onpopstate||s,M=b.onhashchange,U=0,ga=s,ea=j(),T=ea.a;b.addEventListener?b.addEventListener("hashchange",N,E):b.attachEvent("onhashchange",N);M===n&&setInterval(function(){N({})},
100);M||(M=s);b.addEventListener&&(b.addEventListener("popstate",V,E),b.addEventListener("popstate",function(){A=0;U=1},E));h?J(h,t.state===n?{state:B.state,location:B.location}:{location:B.location}):v&&(d=J(d,B));var B=J,u;a:{var C=aa;if(Object.defineProperty){try{if(Object.defineProperty(C,"_",{get:function(){return 1},configurable:r}),1===C._){delete C._;u=C;break a}}catch(ta){}u=document.createElement("a");for(var D in u)try{delete u[D],D in u&&u[D]&&(u[D]=s)}catch(ua){}for(D in C)u[D]=C[D]}else u=
C}aa=B(u,na);v&&b.execScript("Public history, onhashchange","VBScript");!("onpopstate"in b||J(b,{onhashchange:{get:function(){return M},set:function(a){M=a||s}},onpopstate:{get:function(){return oa},set:function(a){(oa=a||s)&&!p&&da()}}},r))&&!p&&(ga=setInterval(function(){b.onpopstate&&da()},100));p||(document.addEventListener?document.addEventListener("click",ha,E):document.attachEvent("onclick",ha));ba=N;try{new I("click")}catch(va){I=s}I||(I=function(a){var b;x.createEvent?(b=x.createEvent("Events"),
b.initEvent(a,E,E)):(b=x.createEventObject(),b.type=a);return b});b.addEventListener||(q={popstate:{},hashchange:{}},q.onpopstate=q.popstate,q.onhashchange=q.hashchange,q.onpagechange=q.pagechange={},b.attachEvent=w.call(function(a,e,c){if(e in q){e=q[e];if(!(a=c.uuid))a=c.uuid="_"+ +new Date;e[a]||(e[a]=c)}else Y.call(a,b,e,c)},b,b.attachEvent),b.detachEvent=w.call(function(a,e,c){var d;e in q?(a=c.uuid)&&(d=q[e])&&delete d[a]:Y.call(a,b,e,c)},b,b.detachEvent));h.pushState=function(a,b,c,d){var f=
W(),h=j().a,k=c&&j(c);A=0;c=k?k.a:h;d&&f[h]&&delete f[h];if((!p||pa)&&P&&a)f[c]=a,W(f),a=s;ja&&ka?d?ka.call(this,a,b,c):ja.call(this,a,b,c):k&&k.e!=j().e&&(S=1,d?g.replace("#"+k.d):g.hash=k.d);a=j().c;if(!z||z!=a)H(3,z,a),z=a};h.replaceState=function(a,b,c){this.pushState(a,b,c,1)};if(v){b.history=d;var w=x.cookie.split("__history_shim__="),G=j().a,R,ca;if(k&&(ca=function(){var a=j().a;G!=a&&ba({oldURL:G,newURL:G=a})},R=setInterval(ca,100),k.src="javascript:true;",k=O.firstChild.appendChild(k).contentWindow,
h.pushState=function(a,b,c,d,f){var h=k.document;if(c=c&&j(c)){f||clearInterval(R);if(d)k.lfirst?(history.back(),this.pushState(a,b,c.a,0,1)):(k.storage=a,g.replace("#/"+c.d));else if(c.a!=G||f)k.lfirst||(k.lfirst=1,this.pushState(k.storage,b,G,0,1)),a=["<script>","lfirst=1;",,"storage="+X(a)+";","\x3c/script>"],a[2]='parent.location.hash="'+c.d.replace(/"/g,'\\"')+'";',h.open(),h.write(a.join("")),h.close();f||(G=j().a,R=setInterval(ca,100))}else k.storage=a},b.attachEvent("onunload",function(){if(k.storage){var a=
{};a[j().a]=k.storage;x.cookie="__history_shim__="+escape(X(a))}clearInterval(R)}),1<w.length)){w=unescape(w.pop().split(";").shift());try{k.storage=ia(w)[j().a]}catch(wa){}}}else h.emulate=!p;var z="",d=function(){var a=j().c;if(!z||z!=a)H(3,z,a),z=a};b.addEventListener?(b.addEventListener("popstate",d),b.addEventListener("hashchange",d)):(b.attachEvent("popstate",d),b.attachEvent("hashchange",d));if(b.opera&&p&&(d=document.createElement("a"),h=d.__proto__))(d=Object.getOwnPropertyDescriptor(d,"href"))&&
"get"in d&&Object.defineProperty(h,"href",function(a){this.get=function(){var d=this.getAttribute("href"),c;return d&&"/"==d[0]?(c=b.location,c=c.protocol+"//"+c.host,c+d):a.call(this)};return this}.call(d,d.get));d=v=J=K=w=d=B=na=h=h=s}.call(window);
